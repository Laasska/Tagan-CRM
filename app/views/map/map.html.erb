<a id="maps-l" ><%= @user.live_in_city %></a>
<a id="maps-p" ><%= @user.place_of_birth %></a>

<div class="modal fade" id="maps-modal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div id="map">
      </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Закрыть</button>
    </div>
  </div>
</div>

<script  type="text/javascript" charset="utf-8">

  $('#maps-l').on('click', function () {
    $('#maps-modal').modal('show')

    $('#maps-modal').on('shown.bs.modal', function () {
      google.maps.event.trigger(map, 'resize');
      initMap();
    });

  });

 function initMap() {

   var map = new google.maps.Map(document.getElementById('map'), {
     zoom: 10
   });

   var service = new google.maps.places.PlacesService(map);
       service.getDetails({
         placeId: '<%= @user.live_id%>'
       }, function(place, status) {
         if (status === google.maps.places.PlacesServiceStatus.OK) {
           var marker = new google.maps.Marker({
             map: map,
             position: place.geometry.location
           });
            var lat = place.geometry.location.lat();
            var lng = place.geometry.location.lng()
            map.panTo(new google.maps.LatLng( lat, lng))
         }
       });

 }
</script>

